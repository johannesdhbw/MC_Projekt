\label{Softwaremplementation}



Für die entgültige Struktur der Software waren mehrere Anforderungen ausschlaggebend. \\
Zunächst wurden drei verschiedene Messprofile definiert und implementiert, sodass der Benutzer zu Beginn zwischen einer Echtzeit-, Stunden- und Tagesmessung wählen kann. In den Messprofilen ist definiert, in welchen Abständen und wie lange Messungen durchgeführt werden sollen. Somit konnten Anforderung Nummer 1 und 10 aus der Tabelle \ref{tab:Anforderungen} gemeinsam umgesetzt werden. \\
Nach der Wahl des Messprofils muss der Arduino den CO\textsubscript{2}-Sensor ansteuern und richtig konfigurieren. Es muss getestet werden, ob er funktionstüchtig und bereit ist eine Messung zu starten. Zudem kann der verwendete Sensor nicht nur CO\textsubscript{2}-Werte, sondern beispielsweise auch Temperaturen messen, sodass der Arduino die richtigen Werte anfordern muss. Damit dies möglich ist, mussten wir die Bibliothek <Adafruit\_CCS811.h> einbinden. Genaueres zu diesem Algorithmus wird in Kapitel \ref{CCS811} erläutert. \\
Zunächst wird im Setup geprüft, ob der Sensor gestartet werden kann. Falls dies nicht der Fall sein sollte, wird eine Fehlermeldung ausgegeben. Nach erfolgreichem Start ist der Arduino angehalten so lange mit dem Programm zu warten, bis der Sensor zurückmeldet, dass er bereit ist, die Messung zu beginnen. \\
Auch während dem Programmdurchlauf wird bei jeder neuen Messung kontrolliert, ob der CO\textsubscript{2}-Sensor funktionstüchtig ist. Danach wird mithilfe der oben genannten Bibliothek der CO\textsubscript{2}-Wert gemessen und an den Arduino weitergegeben. \\
Nach Einlesen der Daten, vergleicht der Mikrocomputer diese mit den gegebenen Grenzwerten. Je nach Bewertung des gemessenen Werte wird eine der grün/gelb/roten LEDs eingeschaltet. Auch die blaue LED, welche die Ansteuerung des automatisierten Fenstersscheibenmotors simulieren soll, wird je nach Messwert an- oder ausgeschaltet. \\
Zudem werden dem Anwender in Echtzeit die jeweiligen Daten im LCD Display aufgegeben, was durch die Bibliothek <LiquidCrystal.h> möglich ist. \\
Damit der Verlauf der Messung später auf Excel geplottet werden kann, wird auf einer Mikro-SD-Karte der gemessene Wert im .csv-Format als .txt-Datei abgespeichert. \\ % Hier noch genauere Ausführung nach fertiger Implementation
Der Anwender nach nun entscheiden, ob er eine weitere Messung durchführen möchte oder nicht. Bei positiver Eingabe wird das Programm von vorne durchgeführt, während beim Ablehnen einer weiteren Messung der Mikrocomputer in einen sogenannten Sleep-Mode geht. % Hier noch genauere Ausführung nach fertiger Implementation



